This is a rewrite of the script described in [this tripwolf post](http://www.tripwolf.com/en/blog/2009/03/17/offtopic-canonical-a-powerful-seo-concept/).

It's currently hosted on [userscripts.org](http://userscripts.org/scripts/show/54133).